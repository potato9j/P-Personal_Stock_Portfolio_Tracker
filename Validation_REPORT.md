# 코드 계산 로직 검증 [수치 보고서] (t-검정 · 카이제곱 · 항등검사)

- 시뮬레이션 : GBM-like, $\mu_0=0.0005$, $\sigma_0=0.015$, 기간≈120영업일, seeds=500..509
- 자산 : 005930, 000660, 035420 / 벤치마크: KOSPI
- 포트폴리오 : 마지막 시점 MV 고정가중
-----

<br>

- **t-검정** : 평균 수익률이 이론값 $\mu_0$와 다른지 확인합니다.
- **카이제곱 검정** : 표준편차가 이론값 $\sigma_0$와 다른지 확인합니다.
- **항등검사** : 계산 로직이 수학적 정의와 일치하는지(예: $\prod(1+r)=P_T/P_0$) 확인합니다.
-----

<br>

## 1) 005930 — t / chi-square
| run | n | mean | stdev | t | p(t) | chi2 | p(chi2,2-sided) | 95% CI std | sigma0∈CI |
|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:--:|
| 1 | 119 | 0.003122 | 0.014367 | 1.990490 | 0.048848 | 108.252475 | 0.542422 | [0.012745, 0.016467] | Y |
| 2 | 119 | 0.001909 | 0.016468 | 0.933059 | 0.352695 | 142.225680 | 0.127738 | [0.014608, 0.018875] | Y |
| 3 | 119 | -0.000564 | 0.014984 | -0.774532 | 0.440166 | 117.748543 | 0.978427 | [0.013292, 0.017174] | Y |
| 4 | 119 | 0.001188 | 0.013821 | 0.543088 | 0.588093 | 100.173057 | 0.237743 | [0.012260, 0.015840] | Y |
| 5 | 119 | 0.002805 | 0.014681 | 1.713035 | 0.089332 | 113.041589 | 0.776539 | [0.013023, 0.016827] | Y |
| 6 | 119 | 0.002021 | 0.014615 | 1.134961 | 0.258692 | 112.021847 | 0.724600 | [0.012965, 0.016751] | Y |
| 7 | 119 | 0.001686 | 0.015440 | 0.837922 | 0.403769 | 125.032011 | 0.622607 | [0.013697, 0.017697] | Y |
| 8 | 119 | 0.002238 | 0.015073 | 1.257513 | 0.211051 | 119.155322 | 0.905799 | [0.013371, 0.017276] | Y |
| 9 | 119 | -0.001467 | 0.013823 | -1.552545 | 0.123210 | 100.214055 | 0.238928 | [0.012262, 0.015844] | Y |
| 10 | 119 | 0.002768 | 0.016166 | 1.530690 | 0.128522 | 137.052331 | 0.221719 | [0.014340, 0.018528] | Y |
-----
<br>

## 2) Portfolio $r_p$(수익률) — t / chi-square
| run | n | mean | stdev | t | p(t) | chi2 | p(chi2,2-sided) | 95% CI std | sigma0∈CI |
|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:--:|
| 1 | 119 | 0.001508 | 0.008708 | 1.262644 | 0.209207 | 39.771765 | 0.000000 | [0.007725, 0.009981] | N |
| 2 | 119 | 0.001656 | 0.008840 | 1.426464 | 0.156375 | 40.985375 | 0.000000 | [0.007842, 0.010132] | N |
| 3 | 119 | -0.000576 | 0.008673 | -1.352951 | 0.178658 | 39.450078 | 0.000000 | [0.007694, 0.009941] | N |
| 4 | 119 | 0.001050 | 0.009353 | 0.641415 | 0.522497 | 45.878899 | 0.000000 | [0.008297, 0.010720] | N |
| 5 | 119 | 0.003357 | 0.009615 | 3.241479 | 0.001546 | 48.483740 | 0.000000 | [0.008529, 0.011020] | N |
| 6 | 119 | 0.002848 | 0.009301 | 2.753577 | 0.006828 | 45.365842 | 0.000000 | [0.008250, 0.010660] | N |
| 7 | 119 | 0.000712 | 0.008791 | 0.263703 | 0.792469 | 40.525602 | 0.000000 | [0.007798, 0.010075] | N |
| 8 | 119 | 0.001109 | 0.008600 | 0.772716 | 0.441236 | 38.790115 | 0.000000 | [0.007629, 0.009857] | N |
| 9 | 119 | 0.000095 | 0.008367 | -0.527369 | 0.598927 | 36.716396 | 0.000000 | [0.007422, 0.009590] | N |
| 10 | 119 | 0.002333 | 0.009312 | 2.146774 | 0.033858 | 45.480969 | 0.000000 | [0.008261, 0.010673] | N |
-----
<br>

## 3) 항등검사 (정의대로 동작 여부) — 005930

- 누적수익률 항등식 차이 (0이어야 정상)
- SMA5 마지막값과 최근 5인 평균 차이 (0이어야 정상) 
- 로그 vs 단순 수익률의 평균/최대 절대차 (작을수록 정상)

| run | Δ cumulative (prod(1+R) − P_T/P_0) | Δ SMA5(last − mean(last5)) | meanlog−simple | maxlog−simple |
|:---:|:---:|:---:|:---:|:---:|
| 1 | 0.0000000000 | 0.0000000000 | 0.0001067398 | 0.0008491951 |
| 2 | 0.0000000000 | 0.0000000000 | 0.0001359382 | 0.0007957199 |
| 3 | -0.0000000000 | 0.0000000000 | 0.0001112500 | 0.0006397270 |
| 4 | -0.0000000000 | 0.0000000000 | 0.0000951362 | 0.0006441316 |
| 5 | 0.0000000000 | 0.0000000000 | 0.0001100090 | 0.0009217110 |
| 6 | -0.0000000000 | 0.0000000000 | 0.0001075329 | 0.0006373649 |
| 7 | 0.0000000000 | 0.0000000000 | 0.0001197852 | 0.0012867115 |
| 8 | 0.0000000000 | 0.0000000000 | 0.0001141993 | 0.0006906802 |
| 9 | -0.0000000000 | 0.0000000000 | 0.0000960937 | 0.0010127177 |
| 10 | 0.0000000000 | 0.0000000000 | 0.0001328373 | 0.0009782724 |
-----
<br>

## 4) 집계 요약 

- 10회 전체에 대한 평균값/횟수 집계 등 요약 통계
- 표의 모든 값은 실제 계산 결과이며, 수정/반올림 하지 않았음. (소수점 자리 표기만 통일)

| 항목 | 값 |
|:--|:--:|
| symbol_mean_of_means | 0.001570 |
| symbol_mean_of_stdevs | 0.014944 |
| portfolio_mean_of_means | 0.001409 |
| portfolio_mean_of_stdevs | 0.008956 |
| symbol_t_p_ge_0_05_count | 9.000000 |
| portfolio_t_p_ge_0_05_count | 7.000000 |
| symbol_sigma0_in_CI_count | 10.000000 |
| portfolio_sigma0_in_CI_count | 0.000000 |
| identity_max_abs_delta_cum | 0.000000 |
| identity_max_abs_delta_sma | 0.000000 |
| identity_mean_abs_diff_log_simple_mean | 0.000113 |
| identity_max_abs_diff_log_simple_max | 0.001287 |
-----

